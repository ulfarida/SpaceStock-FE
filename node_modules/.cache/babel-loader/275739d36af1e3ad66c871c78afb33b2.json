{"ast":null,"code":"var _jsxFileName = \"/home/alta7/Documents/Alterra-Academy/Alterra Academy/SpaceStock/SpaceStock-FE/src/pages/home.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Header from '../components/header';\nimport BuildingList from '../components/buildingList';\nimport Map from '../components/maps';\nimport '../styles/css/home.css';\n\nclass Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      buildingDataAll: [],\n      buildingData: [],\n      page: 1,\n      maxPage: 1,\n      keyword: '',\n      loading: true,\n      type: ''\n    };\n\n    this.componentDidMount = () => {\n      this.getAllData();\n    };\n\n    this.getAllData = async () => {\n      const building = {\n        method: 'get',\n        url: 'https://athazaky.site/building',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n\n      if (this.state.type === 'apartment' || this.state.type === 'office') {\n        building['params'] = {\n          type: this.state.type\n        };\n      }\n\n      const buildingRes = await axios(building);\n      this.setState({\n        buildingDataAll: buildingRes.data,\n        buildingData: buildingRes.data.slice(0, 4),\n        maxPage: Math.ceil(buildingRes.data.length / 4),\n        loading: false\n      });\n      this.disablePageButton();\n    };\n\n    this.pagination = async event => {\n      const action = await event.target.name;\n      const pageNumber = await this.state.page;\n\n      if (action === 'prev' && pageNumber !== 1) {\n        this.setState({\n          page: pageNumber - 1\n        });\n      } else if (action === 'next' && pageNumber !== this.state.maxPage) {\n        this.setState({\n          page: pageNumber + 1\n        });\n      }\n\n      const buildingIndex = (await this.state.page) * 4;\n      const buildingData = await this.state.buildingDataAll.slice(buildingIndex - 4, buildingIndex);\n      this.setState({\n        buildingData: buildingData\n      });\n      this.disablePageButton();\n    };\n\n    this.doSearch = async event => {\n      const keyword = await event.target.value;\n      this.setState({\n        keyword: keyword\n      });\n      const buildingData = await this.state.buildingDataAll.filter(item => item.name.toLowerCase().indexOf(this.state.keyword) > -1);\n      this.setState({\n        buildingData: buildingData.slice(0, 4)\n      });\n    };\n\n    this.getDetail = id => {\n      this.props.history.push('/' + id);\n    };\n\n    this.disablePageButton = () => {\n      const prevButton = document.getElementById(\"prev\");\n      const nextButton = document.getElementById(\"next\");\n\n      if (this.state.page === 1) {\n        prevButton.className += ' disabled';\n      }\n\n      if (this.state.page === this.state.maxPage || this.state.maxPage === 1) {\n        nextButton.className += ' disabled';\n      }\n    };\n\n    this.filterType = async event => {\n      const type = await event.target.value;\n      const buildingDataAll = this.state.buildingDataAll; // this.setState({type : type})\n      // this.getAllData()\n\n      if (type === \"apartment\" || type === \"office\") {\n        buildingDataAll.filter(building => building.building_type === type);\n      }\n\n      console.warn('data');\n      this.setState({\n        buildingDataAll: buildingDataAll\n      });\n    };\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Header, {\n      doSearch: this.doSearch,\n      page: \"home\",\n      filterType: this.filterType,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6 col-12 home__list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row px-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.state.buildingData.map(item => React.createElement(BuildingList, {\n      building: item,\n      getDetail: this.getDetail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"mt-5 mb-3 text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"prev\",\n      type: \"button\",\n      className: \"btn btn-danger mr-3\",\n      name: \"prev\",\n      onClick: e => this.pagination(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Previous\"), React.createElement(\"button\", {\n      id: \"next\",\n      type: \"button\",\n      className: \"btn btn-danger\",\n      name: \"next\",\n      onClick: e => this.pagination(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Next\"))), React.createElement(\"div\", {\n      className: \"col-md-6 col-12 home__maps\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, this.state.loading === true ? null : React.createElement(Map, {\n      buildingData: this.state.buildingData,\n      getDetail: this.getDetail,\n      page: \"home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/alta7/Documents/Alterra-Academy/Alterra Academy/SpaceStock/SpaceStock-FE/src/pages/home.jsx"],"names":["React","Component","axios","Header","BuildingList","Map","Home","state","buildingDataAll","buildingData","page","maxPage","keyword","loading","type","componentDidMount","getAllData","building","method","url","headers","buildingRes","setState","data","slice","Math","ceil","length","disablePageButton","pagination","event","action","target","name","pageNumber","buildingIndex","doSearch","value","filter","item","toLowerCase","indexOf","getDetail","id","props","history","push","prevButton","document","getElementById","nextButton","className","filterType","building_type","console","warn","render","map","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Header from '../components/header'\nimport BuildingList from '../components/buildingList'\nimport Map from '../components/maps'\nimport '../styles/css/home.css'\n\nclass Home extends Component {\n\n    state = {\n        buildingDataAll : [],\n        buildingData : [],\n        page : 1,\n        maxPage : 1,\n        keyword : '',\n        loading : true,\n        type : ''\n    }\n\n    componentDidMount = () => {\n        this.getAllData()\n    }\n\n    getAllData = async () => {\n        const building = {\n\t\t\tmethod: 'get',\n\t\t\turl: 'https://athazaky.site/building',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n            }\n        };\n\n        if (this.state.type === 'apartment' || this.state.type === 'office') {\n            building['params'] = {\n                type : this.state.type\n            }\n        }\n        \n        const buildingRes = await axios(building)\n        this.setState({\n            buildingDataAll : buildingRes.data,\n            buildingData : buildingRes.data.slice(0,4), \n            maxPage : Math.ceil(buildingRes.data.length/4),\n            loading : false\n            })\n        this.disablePageButton()\n    }\n\n    pagination = async (event) => {\n        const action = await event.target.name\n        const pageNumber = await this.state.page\n\n        if (action === 'prev' && pageNumber !== 1) {\n            this.setState({page : pageNumber-1})\n        } else if (action === 'next' && pageNumber !== this.state.maxPage) {\n            this.setState({page : pageNumber+1})\n        }\n\n        const buildingIndex = await this.state.page*4\n        const buildingData = await this.state.buildingDataAll.slice(buildingIndex-4, buildingIndex)\n        this.setState({buildingData : buildingData})\n        this.disablePageButton()\n    }\n\n    doSearch = async (event) => {\n        const keyword = await event.target.value\n        this.setState({keyword : keyword})\n        \n        const buildingData = await this.state.buildingDataAll.filter(item => item.name.toLowerCase().indexOf(this.state.keyword) > -1\n        )\n        this.setState({buildingData : buildingData.slice(0,4)})\n    }\n\n    getDetail = (id) => {\n        this.props.history.push('/'+id)\n    }\n\n    disablePageButton = () => {\n        const prevButton = document.getElementById(\"prev\")\n        const nextButton = document.getElementById(\"next\")\n        if (this.state.page === 1) {\n            prevButton.className += ' disabled'\n        }\n        if (this.state.page === this.state.maxPage || this.state.maxPage === 1) {\n            nextButton.className += ' disabled'\n        }\n    }\n\n    filterType = async (event) => {\n        const type = await event.target.value\n        const buildingDataAll = this.state.buildingDataAll\n        // this.setState({type : type})\n        // this.getAllData()\n        if(type === \"apartment\" || type === \"office\"){\n            buildingDataAll.filter(building => building.building_type===type)\n        }\n        console.warn('data')\n        this.setState({buildingDataAll : buildingDataAll})\n    }\n\n    render () {\n        return (\n            <React.Fragment>\n                <Header doSearch={this.doSearch} page=\"home\" filterType={this.filterType}/>\n                <div className=\"container-fluid\">\n                    <div className=\"row\">\n                        <div className=\"col-md-6 col-12 home__list\">\n                            <div className=\"row px-1\">\n                                {this.state.buildingData.map(item=>\n                                    <BuildingList building={item} getDetail={this.getDetail}/>\n                                )}\n                            </div>\n                            <div className=\"mt-5 mb-3 text-center\">\n                                <button id=\"prev\" type='button' className='btn btn-danger mr-3' name='prev' onClick={(e)=>this.pagination(e)}>Previous</button>\n                                <button id=\"next\" type='button' className='btn btn-danger' name='next' onClick={(e)=>this.pagination(e)}>Next</button>\n                            </div>\n                        </div>\n                        <div className=\"col-md-6 col-12 home__maps\">\n                        {this.state.loading === true? \n                            null\n                            :    \n                            <Map \n                                buildingData={this.state.buildingData} \n                                getDetail={this.getDetail}\n                                page=\"home\"/>\n                        }\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>    \n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}